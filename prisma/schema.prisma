// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  // url is now in prisma.config.ts
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Product {
  id           String               @id @default(uuid())
  slug         String               @unique
  officialUrl  String
  active       Boolean              @default(true)
  createdAt    DateTime             @default(now())
  updatedAt    DateTime             @updatedAt
  translations ProductTranslation[]
  videoReviews VideoReview[]
}

model ProductTranslation {
  id           String   @id @default(uuid())
  product      Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  productId    String
  lang         String // "en", "es", etc.
  name         String
  heroHeadline String
  subHeadline  String
  bullets      String // JSON array of strings
  ctaLabel     String
  badges       String // JSON array of strings
  faqs         String // JSON array of objects
  reviews      String // JSON array of objects
  quiz         String // JSON object

  @@unique([productId, lang])
}

model VideoReview {
  id           String  @id @default(uuid())
  product      Product @relation(fields: [productId], references: [id], onDelete: Cascade)
  productId    String
  lang         String
  provider     String  @default("youtube") // "youtube", "vimeo", "mp4"
  videoId      String // ID or URL
  title        String?
  thumbnailUrl String?
  active       Boolean @default(true)

  @@unique([productId, lang])
}

model SiteSettings {
  id    String @id @default(uuid())
  key   String @unique
  value String
}

model TrackingSettings {
  id             String  @id @default(uuid())
  googleAdsId    String?
  googleAdsLabel String? // Conversion Label
  conversionId   String? // Sometimes used interchangeably or specific
  active         Boolean @default(true)
}
